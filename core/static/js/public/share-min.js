"use strict";const kwargs={tigger:"#share-link",container:"#share-links-modal",exit:"#share-modal-close",with:"#share-with-price",without:"#share-without-price"};class ShareLink{constructor(t){this.tigger=this.getElement(t.tigger),this.container=this.getElement(t.container),this.exit=this.getElement(t.exit,this.container),this.with=this.getElement(t.with,this.container),this.without=this.getElement(t.without,this.container),this.messageBox=this.getElement(t.messageBox,this.container),this.shareButtons=[this.with,this.without],this.shareText=this.getElement("#messageBox",this.container),this.key=t.key,this.url=t.url,this.request={type:"0",list:"0"}}init(){this.showHide(),this.share()}getElement(t,e=document){return e.querySelector(t)}showHide(){this.tigger.addEventListener("click",(()=>{this.container.classList.add("active")})),this.exit.addEventListener("click",(()=>{this.container.classList.remove("active");const t=this.container.querySelector("#share_message");null!=t&&t.remove()}))}message(t="success"){let e,s;"success"==t?(e="text-success",s="The link to the list of products has been copied to the clipboard"):"danger"==t||"error"==t?(e="text-danger",s="Something went wrong"):"empty"!=t&&"error"!=t||(e="text-danger",s="First select the stones you want to share");const i=`\n            <h6 class="h6 ${e} m-0 mt-3 text-center" id="share_message">${s}</h6>\n        `,h=this.container.querySelector("#share_message");null==h||null==h||h.remove(),this.messageBox.insertAdjacentHTML("beforeend",i)}share(){this.shareButtons.map((t=>{t.addEventListener("click",(()=>{t==this.with?this.request.type="1":t==this.without&&(this.request.type="0");const e=JSON.parse(localStorage.getItem(this.key)).map((t=>t.replace("chb_","")));this.request.list=e,0==this.request.list.length?this.message("empty"):ajax(this.url,this.request,this.shared,this)}))}))}shared(t,e){const s=t.share_link;e.shareText.textContent=s,e.shareText.setAttribute("href",s),e.shareText.parentElement.classList.add("active")}}