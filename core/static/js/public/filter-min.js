"use strict";class Control{constructor(t){}_debug(t=this){return this}_getElement(t,e=document){return e.querySelector(t)}_getElements(t,e=document){return[...e.querySelectorAll(t)]}_getChilds(t,e=Array){const s=[];return e.map((e=>{[...e.querySelectorAll(t)].map((t=>s.push(t)))})),s}_getElementsList(t,e){const s=[];return t.map((t=>{s.push(this._getElement(t,e))})),s}spinerView(t="get",e){if("get"==t){return'\n            <div class="text-center text-primary py-4 shadow-sm w-100 bg-lite border-bottom border-top my-1" id="loading-spiner">\n                <div class="spinner-border" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                </div>\n            </div>\n            '}if("remove"==t){null==e&&(e=this.container);const t=e.querySelector("#loading-spiner");null!=t&&t.remove()}else if("has"==t){null==e&&(e=this.container);const t=e.querySelector("#loading-spiner");return null!=t}}getDiamondHTML(t){parent.innerHTML="";let e=t.fields.photo;"N/A"!=e&&""!=e&&"-"!=e||(e="static/img/diamonds/base-diamond.jpg");const s=deliveryDate();return`\n        <div class="result__item result-section--element">\n    \n        <ul class="item-list result__item-list">\n            <li class="item-list-element">\n                <i class="item-shape svg-${t.fields.shape.toLowerCase()}"></i>\n                <i class="fa fa-video-camera ms-2" aria-hidden="true"></i>\n                <i class="fa fa-chevron-down ms-2" aria-hidden="true"></i>\n            </li>\n            <li class="item-list-element">\n                <div class="checkbox-label label-result" data-io-label="diamonds-item">\n                    <input type="checkbox" name="chb_${t.pk}" id="chb_${t.pk}" class="d-none checkbox checkbox-results">\n                    <i class="fa fa-check" aria-hidden="true"></i>\n                </div>\n            </li>\n            <li class="item-list-element">\n                <span class="me-2 shape-text-info">Shape:</span>\n                <span>${t.fields.shape}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Disc%:</span>\n                <span>${t.fields.disc}%</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Price:</span>\n                <span>$${t.fields.sale_price}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Carat:</span>\n                <span>${t.fields.weight}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Cut:</span>\n                <span>${t.fields.cut}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Color:</span>\n                <span>${t.fields.color}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Clarity:</span>\n                <span>${t.fields.clarity}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">T%:</span>\n                <span>${t.fields.table_procent}%</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">D%:</span>\n                <span>${t.fields.depth_procent}%</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">L/W:</span>\n                <span>${t.fields.lw}</span>\n            </li>\n            <li class="item-list-element">\n                <span class="item-list-element--info">Report:</span>\n                <span>${t.fields.lab}</span>\n            </li>\n        </ul>\n\n        <div class="result__drop-down border-top">\n            <div class="row">\n                \n                <div class="result__drop-down--col col-3">\n                    <img src="${e}" alt="Diamond Photo" class="img-fluid rounded">\n                </div>\n                \n                <div class="result__drop-down--col col-7">\n    \n                    <h4 class="h4 py-2">1.01 Carat Pear Lab Diamond</h4>\n    \n                    <h5 class="h5 py-2">$${t.fields.sale_price}</h5>\n    \n                    <ul class="list result__info-list">\n    \n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Carat: ${t.fields.weight}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Color: ${t.fields.color}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Clarity: ${t.fields.clarity}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Cut: ${t.fields.cut}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Polish: ${t.fields.polish}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Symmetry: ${t.fields.symmetry}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Table: ${t.fields.table_procent}%</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Depth: ${t.fields.depth_procent}%</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>L/W: ${t.fields.lw}</span>\n                        </li>\n                        <li class="py-3 border-bottom result__info-li">\n                            <span>Measurements: ${t.fields.measurements}</span>\n                        </li>\n                    </ul>\n    \n                    <div class="acordion">\n                        <button type="button" class="acordion__btn btn-more--info">\n                            Additional Details\n                            <i class="fa fa-chevron-down ms-2" aria-hidden="true"></i>\n                        </button>\n                        <div class="acordion__body body-more--info border-top w-100">\n                            <ul class="list result__drop-list">\n                                <li class="result__drop-li">\n                                    <span>Culet: ${t.fields.culet}</span>\n                                </li>\n                                <li class="result__drop-li">\n                                    <span>Girdle: ${t.fields.gridle}</span>\n                                </li>\n                                <li class="result__drop-li">\n                                    <span>Report â„–: ${t.fields.cert_number}</span>\n                                </li>\n                                <li class="result__drop-li">\n                                    <span>Fluour: ${t.fields.fluor}</span>\n                                </li>\n                                <li class="result__drop-li">\n                                    <span>Origin: Lab grown Diamond</span>\n                                </li>\n                                <li class="result__drop-li">\n                                    <span class="d-flex w-100 flex-column">\n                                        <span>Lab Created Diamond Delivery:</span>\n                                        <span class="text-nowrap delivery_date">${s.day} ${s.dayNum} ${s.month}</span>\n                                    </span>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n    \n                </div>\n                \n                <div class="result__drop-down--col col-2 d-flex flex-column justify-content-center align-items-center">\n                    <p class="mt-3 w-100 d-flex justify-content-center">\n                        <i class="fa fa-heart me-2 text-primary" aria-hidden="true"></i>\n                        <span>Only One Available</span>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n        `}getEmpty(t){return`        \n        <div class="text-center text-primary py-4 border shadow-sm w-100 bg-lite" id="empty-allert">\n            <p class="fs-5 m-0">${t}</p>\n        </div>\n        `}updateView(t,e){let s;s="comparison"!==e.key?JSON.parse(t[e.key]):t;const i=e.insertPosition||"beforeend";void 0!==e.responceReverse&&null!==e.responceReverse&&1==e.responceReverse&&(s=s.reverse()),setTimeout((()=>{e.spinerView("remove",e.container),s.map((t=>{e.container.insertAdjacentHTML(i,e.getDiamondHTML(t))})),e.updateViewEnd(t)}),200);this._getElement(".inout-num-1")}}class DataControl{constructor(){this.filter={shape:[],lab:[],strs:{},nums:{}},this.currentKey="all",this.sort={result:["sale_price"],best:["sale_price"],comparison:["sale_price"],compare:{result:!1,best:!1,comparison:!1}},this.comparing=[],this.comparisonSelected=[],this.scrollLock=!1,this.permissions={result:{next:!0,prev:!1},best:{next:!0,prev:!1}},this.ordering={result:[0,45],best:[0,45]},this.requestOrdering={result:[0,45],best:[0,45]},this.maxOrder={result:null,best:null},this.responceReverse=!1}dropInfinity(){this.scrollLock=!0,this.permissions={result:{next:!0,prev:!1},best:{next:!0,prev:!1}},this.ordering={result:[0,45],best:[0,45]},this.requestOrdering={result:[0,45],best:[0,45]},this.maxOrder={result:null,best:null}}}class NoUI extends Control{constructor(t){super(),this.data={shape:[],lab:[],strs:{},nums:{}},this.dataControl=t.dataControl,this.view=t.view,this.url=t.url,this.keys=[],this.parent=this._getElement(t.parent),this.numericElements=this._getElements(t.numericSliders,this.parent),this.strElements=this._getElements(t.stringSliders,this.parent),this.labElements=this._getElements(t.labInputs,this.parent),this.shapeElements=this._getElements(t.shapeInputs,this.parent),this.cleanButton=this._getElement(t.cleanButton,this.parent),this.numericInputs=[],this.sliders=[],this.clean()}getMaxMin(t){const e=this._getElement(t);return{max:Number(e.max),min:Number(e.min)}}numeric(t,e){const s=e.options.key;this.keys.push(s);const i=this._getElement(t),n=i.closest(".filter-item"),a=noUiSlider.create(i,e.params);this.sliders.push(a),this.numericInputs[s]={min:this._getElement('[data-numeric-input="min"]',n),max:this._getElement('[data-numeric-input="max"]',n)},a.on("update",(()=>{const t=a.get();this.numericInputs[s].min.value=t[0],this.numericInputs[s].max.value=t[1];let e=t[0],i=t[1];"sale_price"==s&&(e=e.slice(0,e.length-1),i=i.slice(0,i.length-1));const n=a.options.start[0],r=a.options.start[1];e==n&&i==r?delete this.data.nums[s]:this.data.nums[s]=[e,i]})),this.numericInputs[s].min.addEventListener("change",(()=>{a.set([this.numericInputs[s].min.value,null]),this.apply()})),this.numericInputs[s].max.addEventListener("change",(()=>{a.set([null,this.numericInputs[s].max.value]),this.apply()})),a.on("change",(()=>{this.apply()}))}string(t,e){const s=e.options.key;this.keys.push(s);const i=this._getElement(t),n=i.closest(".filter-item"),a=noUiSlider.create(i,e.params);this.sliders.push(a);this._getElements(".noUi-value",n).map(((t,s)=>{t.textContent=e.params.replacePips[s]})),a.on("change",(()=>{const t=a.get()[1],e=a.options.replacePips,i=[];for(let s=0;s<t;s++)i.push(e[s]);i.length==e.length?delete this.data.strs[s]:this.data.strs[s]=i,this.apply()}))}select(t){let e;"lab"===t?e=this.labElements:"shape"===t&&(e=this.shapeElements),e.map((e=>{e.addEventListener("change",(()=>{Number(e.value);const s=e.checked,i=e.dataset.shape;s?"shape"==t?this.data[t].push(i):"lab"==t&&this.data[t].push(e.dataset.labName):s||("shape"==t?this.data[t]=this.data[t].filter((t=>t!=i)):"lab"==t&&(this.data[t]=this.data[t].filter((t=>t!=e.dataset.labName)))),this.apply()}))}))}clean(){this.cleanButton.addEventListener("click",(()=>{this.data={shape:[],lab:[],strs:{},nums:{}},this.sliders.map((t=>{t.reset()})),this.shapeElements.map((t=>{t.checked=!1})),this.labElements.map((t=>{t.checked=!1})),this.apply(),this.cleaner()}))}cleaner(){0===Object.keys(this.data.nums).length&&0===Object.keys(this.data.strs).length&&0===this.data.lab.length&&0==this.data.shape.length?(this.cleanButton.classList.add("hidden"),this.cleanButton.setAttribute("disabled","")):(this.cleanButton.classList.remove("hidden"),this.cleanButton.removeAttribute("disabled"))}apply(){this.cleaner(),this.currentKey="all",this.dataControl.currentKey="all",this.dataControl.ordering={result:[0,45],best:[0,45]},this.dataControl.requestOrdering={result:[0,45],best:[0,45]},this.view.result.container.innerHTML="",this.view.result.container.insertAdjacentHTML("afterbegin",this.spinerView("get")),this.view.best.container.innerHTML="",this.view.best.container.insertAdjacentHTML("afterbegin",this.spinerView("get"));for(let t in this.data)this.dataControl.filter[t]=this.data[t];this.dataControl.dropInfinity(),ajax("filtering/",this.dataControl,this.view.updateView,this.view)}}class FilterSort extends Control{constructor(t){super(),this.dataControl=t.control,this.viewControl=t.view,this.key=t.key,this.parent=this._getElement(t.parent),this.container=this._getElement(t.container,this.parent),this.simple={container:this._getElement(t.simpleSort)},this.simple.items=this._getElements("[data-io-simple-sort]",this.simple.container),this.advanced={container:this._getElement(t.modal,this.parent)},this.advanced.body=this._getElement(".modal-body",this.advanced.container),this.advanced.selected=this._getElement(t.priorityList,this.advanced.body),this.advanced.unselected=this._getElement(t.sortList,this.advanced.body),this.advanced.items=this._getElements("[data-io-advanced-sort]",this.advanced.body),this.advanced.angle=this._getChilds(".fa-angle-down",this.advanced.items),this.advanced.plus=this._getChilds(".fa-plus",this.advanced.items),this.advanced.handle=this._getChilds(".drag-handle",this.advanced.items),this.sort=[],this.url=t.url,1==t.debug&&this._debug()}init(){this.dragElems=this.advanced.items.filter((t=>{if(t.parentElement==this.advanced.selected)return t})),this.plusEvent(),this.angleEvent(),this.simpleEvent(),this.drag()}plusEvent(){this.advanced.plus.map(((t,e)=>{t.addEventListener("click",(()=>{const t=this.advanced.items[e];t.parentElement==this.advanced.unselected?(t.classList.add("active-2"),this.advanced.selected.insertAdjacentElement("afterbegin",t),this.dragElems.unshift(t)):t.parentElement==this.advanced.selected&&(t.classList.remove("active-1"),t.classList.remove("active-2"),this.advanced.unselected.insertAdjacentElement("afterbegin",t),this.dragElems=this.dragElems.filter((e=>{if(e!=t)return e}))),this.dragElems=this._getElements(".modal-sort-item",this.advanced.selected),this.dragEvent(this.dragElems),this.sortUpdate("advanced")}))}))}angleEvent(){this.advanced.angle.map(((t,e)=>{t.addEventListener("click",(()=>{const t=this.advanced.items[e];t.classList.contains("active-1")?(t.classList.remove("active-1"),t.classList.add("active-2")):t.classList.contains("active-2")&&(t.classList.remove("active-2"),t.classList.add("active-1")),this.sortUpdate("advanced")}))}))}simpleEvent(){this.simple.items.map((t=>{t.addEventListener("click",(()=>{this.simple.items.map((e=>{e!==t&&(e.classList.remove("active-1"),e.classList.remove("active-2"))})),t.classList.contains("active-1")?(t.classList.remove("active-1"),t.classList.add("active-2")):t.classList.contains("active-2")?(t.classList.remove("active-2"),t.classList.add("active-1")):t.classList.contains("active-1")||t.classList.contains("active-2")||t.classList.add("active-2"),this.updateDragElems(),this.dragEvent(this.dragElems),this.sortUpdate("simple")}))}))}updateDragElems(){this.advanced.items.map((t=>{this.sort.forEach((t=>{}))})),this.dragElems=this._getElements("[data-io-advanced-sort]",this.advanced.selected)}drag(){this.dragObject=new Sortable(this.advanced.selected,{animation:200,handle:".drag-handle"})}dragEvent(t){t.map((t=>{t.ondragend=()=>{this.sortUpdate("advanced")}}))}sortUpdate(t){if("advanced"==t){this.sort=[];const t=[];this.dragElems=this._getElements("[data-io-advanced-sort]",this.advanced.selected),this.dragElems.map((e=>{let s=e.dataset.ioAdvancedSort;t.push(s),e.classList.contains("active-1")&&(s="-"+s),this.sort.push(s)})),this.simple.items.map((t=>{t.classList.remove("active-1"),t.classList.remove("active-2")})),this.simple.items.map((e=>{e.dataset.ioSimpleSort==[t[0]]&&(this.sort[0]==t[0]?e.classList.add("active-1"):e.classList.add("active-2"))}))}else"simple"==t&&this.simple.items.map((t=>{if(t.classList.contains("active-1")||t.classList.contains("active-2")){let e=t.dataset.ioSimpleSort;this.sort=this.sort.filter((t=>{if(t!=e&&t!=`-${e}`)return t})),t.classList.contains("active-1")&&(e="-"+e),this.sort.unshift(e)}}));if("compare"==this.sort[0]||"-compare"==this.sort[0]){const t=this.sort[0];this.dataControl.sort.compare[this.key]=t,this.sort=this.sort.filter((e=>e!=t))}else this.dataControl.sort.compare[this.key]=!1;if(this.dataControl.sort[this.key]=this.sort,"comparison"==this.key){const t=this.view.comparison.selected.map((t=>t.replace("chb_","")));this.dataControl.comparisonSelected=t}this.container.innerHTML="",this.container.insertAdjacentHTML("afterbegin",this.spinerView("get")),this.dataControl.scrollLock=!0,this.dataControl.dropInfinity(),ajax(this.url,this.dataControl,this.updateView,this)}updateViewEnd(t){const e=t.resultResponceLen,s=t.bestResponceLen;this.viewControl.updateHTMLList(this.key),this.viewControl.selected(),this.viewControl.selecteble(),this.dataControl.maxOrder.result=e,this.dataControl.maxOrder.best=s,this.dataControl.scrollLock=!1}}class Comparison extends Control{constructor(t){super(),this.compKey="comparing",this.dataControl=t.dataControl,this.result={container:this._getElement(t.resultContainer),len:this._getElement("#result-length")},this.result.card=this._getElements(".result__item",this.result.container),this.result.labels=this._getChilds("[data-io-label]",this.result.card),this.result.inputs=this._getChilds('input[type="checkbox"]',this.result.labels),this.best={container:this._getElement(t.bestContainer),len:this._getElement("#best-length")},this.best.card=this._getElements(".result__item",this.best.container),this.best.labels=this._getChilds("[data-io-label]",this.best.card),this.best.inputs=this._getChilds('input[type="checkbox"]',this.best.labels),this.comparison={container:this._getElement(t.comparisonContainer),lenList:this._getElementsList(t.comparisonLen),deleteButton:this._getElement("#comparison-delet-selected"),deleteAllButton:this._getElement("#comparison-delet-all"),shareLink:this._getElement("#share-link"),selected:[]},this.share={container:this._getElement("#share-link-container"),link:this._getElement("#messageBox"),trigger:this._getElement("#share-link-button"),radio:this._getElements('input[name="shareprice"]'),type:this._getElement("#share-type-text")},this.cart={container:this._getElement(t.cartPack),button:this._getElement(t.cartButton),responceTitle:{success:"The stones have been placed in the cart",error:"You haven't chosen a single stone",alert:"Have you already added these stones"}},this.cart.length=this._getElement(t.cartLength,this.cart.container),this.cart.exit=this._getElement(t.cartExit,this.cart.container),this.cart.title=this._getElement(t.cartTitle,this.cart.container)}init(){null!=localStorage.getItem(this.compKey)&&null!=localStorage.getItem(this.compKey)||localStorage.setItem(this.compKey,JSON.stringify([])),this.comparing=JSON.parse(localStorage.getItem(this.compKey)),this.selecteble(),this.selected(),this.comparisonDelete(),this.comparisonDeleteAll(),this.shareLink(),this.upgrade(this.result.card),this.upgrade(this.best.card),this.cartPack()}selecteble(){new ElementsControl({manager:this.result.labels,managed:this.result.inputs}).label((t=>{const e=JSON.parse(localStorage.getItem(this.compKey));e.push(t),this.comparing=[...new Set(e)],localStorage.setItem(this.compKey,JSON.stringify(this.comparing)),this.selected()}),(t=>{const e=JSON.parse(localStorage.getItem(this.compKey));this.comparing=e.filter((e=>e!=t)),localStorage.setItem(this.compKey,JSON.stringify(this.comparing)),this.selected()})),new ElementsControl({manager:this.best.labels,managed:this.best.inputs}).label((t=>{const e=JSON.parse(localStorage.getItem(this.compKey));e.push(t),this.comparing=[...new Set(e)],localStorage.setItem(this.compKey,JSON.stringify(this.comparing)),this.selected()}),(t=>{const e=JSON.parse(localStorage.getItem(this.compKey));this.comparing=e.filter((e=>e!=t)),localStorage.setItem(this.compKey,JSON.stringify(this.comparing)),this.selected()}))}selected(){const t=[...this.result.inputs,...this.best.inputs];t.map((t=>{t.checked=!1,t.parentElement.classList.remove("active")})),t.map((t=>{this.comparing.map((e=>{t.name==e&&(t.checked=!0,t.parentElement.classList.add("active"))}))})),this.comparison.lenList.map((t=>{t.textContent=`(${this.comparing.length})`})),this.dataControl.comparing=this.comparing.map((t=>t.replace("chb_",""))),ajax("filtering/of/key/",this.dataControl,this.comparisonView,this)}updateHTMLList(t){"comparison"==t?(this.comparison.card=this._getElements(".result__item",this.comparison.container),this.comparison.labels=this._getChilds("[data-io-label]",this.comparison.card),this.comparison.inputs=this._getChilds('input[type="checkbox"]',this.comparison.labels),this.upgrade(this.comparison.card)):"result"==t?(this.result.card=this._getElements(".result__item",this.result.container),this.result.labels=this._getChilds("[data-io-label]",this.result.card),this.result.inputs=this._getChilds('input[type="checkbox"]',this.result.labels),this.upgrade(this.result.card)):"best"==t&&(this.best.card=this._getElements(".result__item",this.best.container),this.best.labels=this._getChilds("[data-io-label]",this.best.card),this.best.inputs=this._getChilds('input[type="checkbox"]',this.best.labels),this.upgrade(this.best.card))}comparisonView(t,e){const s=e.getEmpty("Comparison list is empty");if(0!=t.length)e.comparison.container.innerHTML="",t.map((t=>{e.comparison.container.insertAdjacentHTML("beforeend",e.getDiamondHTML(t))})),e.updateHTMLList("comparison"),e.comparisonSelected(),e.comparisonSelecteble();else{const t=e._getElement("#empty-allert",e.comparison.container);null!=t&&null!=t||(e.comparison.innerHTML="",e.comparison.container.insertAdjacentHTML("afterbegin",s))}}comparisonSelecteble(){new ElementsControl({manager:this.comparison.labels,managed:this.comparison.inputs}).label((t=>{this.comparison.selected.push(t),this.comparison.inputs.map((e=>{e.name==t&&(e.checked,e.parentElement.classList.add("active"))}))}),(t=>{this.comparison.selected=this.comparison.selected.filter((e=>e!=t)),this.comparison.inputs.map((e=>{e.name==t&&(e.checked,e.parentElement.classList.remove("active"))}))}))}comparisonSelected(){const t=this.comparison.inputs;t.map((t=>{t.checked=!1,t.parentElement.classList.remove("active")})),t.map((t=>{this.comparison.selected.map((e=>{t.name==e&&(t.checked=!0,t.parentElement.classList.add("active"))}))}))}comparisonDelete(){this.comparison.deleteButton.addEventListener("click",(()=>{0!=this.comparison.selected.length&&(this.comparison.selected.map((t=>{this.comparison.inputs.map(((e,s)=>{e.name==t&&(this.comparison.selected=this.comparison.selected.filter((e=>e!=t)),this.comparing=this.comparing.filter((e=>e!=t)),localStorage.setItem(this.compKey,JSON.stringify(this.comparing)),this.comparison.card[s].remove())}))})),this.updateHTMLList("comparison"),this.selected())}))}comparisonDeleteAll(){this.comparison.deleteAllButton.addEventListener("click",(()=>{this.comparison.selected=[],localStorage.setItem(this.compKey,JSON.stringify([])),this.comparing=[],this.comparison.card.map((t=>{t.remove()})),this.updateHTMLList("comparison"),this.selected()}))}shareLink(){this.share.trigger.addEventListener("click",(()=>{this.share.data={share:"0",comparing:this.dataControl.comparing},this.share.data.comparing.length>0?(this.share.radio.map((t=>{1==t.checked&&(this.share.data.share=t.value)})),ajax("/share/create/",this.share.data,((t,e)=>{e.share.container.classList.add("active"),e.share.link.textContent=t.share_link,"0"==e.share.data.share?e.share.type.innerHTML='Your link to the list of products <span class="text-success">without price</span> <br> was created and copied':"1"==e.share.data.share&&(e.share.type.innerHTML='Your link to the list of products <span class="text-success">with price</span> <br> was created and copied');const s=[new ClipboardItem({"text/plain":new Blob([t.share_link],{type:"text/plain"})})];navigator.clipboard.write(s).then((function(){}),(function(){}))}),this)):(this.share.container.classList.add("active"),this.share.type.innerHTML="First select the products you want to share",this.share.link.innerHTML="--")}))}upgrade(t){const e=new ElementsControl({manager:this._getChilds(".result__item-list",t),managed:this._getChilds(".result__drop-down",t)}),s=new ElementsControl({manager:this._getChilds(".acordion__btn",t),managed:this._getChilds(".acordion__body",t)});e.toggler({notThis:this._getChilds("[data-io-label]",t)}),s.toggler()}updateView(t,e){const s=JSON.parse(t.result),i=JSON.parse(t.best),n=t.resultResponceLen,a=t.bestResponceLen;0!==s.length?setTimeout((()=>{e.spinerView("remove",e.result.container),e.result.len.textContent=`(${n})`,s.map((t=>{e.result.container.insertAdjacentHTML("beforeend",e.getDiamondHTML(t))})),e.updateHTMLList("result"),e.selecteble(),e.selected()}),200):(e.result.len.textContent=`(${n})`,e.result.container.innerHTML="",e.result.container.insertAdjacentHTML("beforeend",e.getEmpty("Nothing was found for your query"))),0!==i.length?setTimeout((()=>{e.spinerView("remove",e.best.container),e.best.len.textContent=`(${a})`,i.map((t=>{e.best.container.insertAdjacentHTML("beforeend",e.getDiamondHTML(t))})),e.updateHTMLList("best")}),200):(e.best.len.textContent=`(${a})`,e.best.container.innerHTML="",e.best.container.insertAdjacentHTML("beforeend",e.getEmpty("Nothing was found for your query"))),0===n&&0===a||setTimeout((()=>{e.selecteble(),e.selected(),e.dataControl.scrollLock=!1,e.dataControl.maxOrder.result=n,e.dataControl.maxOrder.best=a}),210)}cartPack(){this.cart.exit.addEventListener("click",(()=>{this.cart.container.classList.remove("active"),this.cart.title.classList.remove("text-danger"),this.cart.title.classList.remove("text-succes"),this.cart.title.classList.remove("text-alert")})),this.cart.button.addEventListener("click",(()=>{if(this.cart.container.classList.add("active"),0!=this.comparing.length){const t=this.comparing.map((t=>t.replace("chb_","")));ajax("cart/pack/",t,this.cartResponce,this)}else this.cart.title.textContent=this.cart.responceTitle.error,this.cart.title.classList.remove("text-succes"),this.cart.title.classList.remove("text-alert"),this.cart.title.classList.add("text-danger")}))}cartResponce(t,e){e.cart.length.textContent=t.update_len,0==t.update_len?(e.cart.title.textContent=e.cart.responceTitle.alert,e.cart.title.classList.remove("text-danger"),e.cart.title.classList.remove("text-success"),e.cart.title.classList.add("text-alert")):(e.cart.title.textContent=e.cart.responceTitle.success,e.cart.title.classList.remove("text-danger"),e.cart.title.classList.remove("text-alert"),e.cart.title.classList.add("text-success")),e.comparison.selected=[],localStorage.setItem(e.compKey,JSON.stringify([])),e.comparing=[],e.comparison.card.map((t=>{t.remove()})),e.updateHTMLList("comparison"),e.selected()}}class InfinityScroll extends Control{constructor(t){super(),this.step=15,this.key=t.key,this.dataControl=t.dataControl,this.viewControl=t.viewControl,this.container=this._getElement(t.container),1==t.debug&&this._debug()}permission(t){this.direction=t;let e=!1;const s=this.dataControl.ordering[this.key][0],i=this.dataControl.ordering[this.key][1];return this.dataControl.scrollLock||(this.dataControl.scrollLock=!0,"next"==this.direction&&!0===this.dataControl.permissions[this.key].next?(null==this.dataControl.maxOrder[this.key]||this.dataControl.maxOrder[this.key]>i)&&(e=!0):"prev"==this.direction&&!0===this.dataControl.permissions[this.key].prev?s>0?e=!0:this.dataControl.permissions[this.key].prev=!1:e=!1,0==e&&(this.dataControl.scrollLock=!1)),e}next(){if(this.permission("next")){const t=this.dataControl.ordering[this.key][0],e=this.dataControl.ordering[this.key][1],s=this.dataControl.maxOrder[this.key];null!=s&&e+this.step>s?(this.step=e+this.step-s,this.dataControl.permissions[this.key].next=!1):null!=s&&e+this.step==s&&(this.dataControl.permissions[this.key].next=!1),this.dataControl.requestOrdering[this.key]=[e,e+this.step],this.dataControl.ordering[this.key]=[t+this.step,e+this.step],this.dataControl.permissions[this.key].prev=!0,this.preparing()}}prev(){if(this.permission("prev")){this.step=15;const t=this.dataControl.ordering[this.key][0],e=this.dataControl.ordering[this.key][1];if(t-this.step<0){const e=-1*(t-this.step);this.step=this.step-e,this.dataControl.permissions[this.key].prev=!1}else t-this.step==0&&(this.dataControl.permissions[this.key].prev=!1);this.dataControl.requestOrdering[this.key]=[t-this.step,t],this.dataControl.ordering[this.key]=[t-this.step,e-this.step],this.dataControl.permissions[this.key].next=!0,this.preparing()}}preparing(){"next"==this.direction?this.insertPosition="beforeend":"prev"==this.direction&&(this.insertPosition="afterbegin"),"next"==this.direction?(this.container.insertAdjacentHTML(this.insertPosition,this.spinerView("get")),this.container.scrollTo(0,this.container.scrollHeight-5)):"prev"==this.direction&&(this.container.insertAdjacentHTML(this.insertPosition,this.spinerView("get")),this.container.scrollTo(0,5)),this.request()}request(){"prev"==this.direction&&(this.responceReverse=!0),ajax("filtering/",this.dataControl,this.updateView,this)}updateViewEnd(t){0==JSON.parse(t[this.key]).length&&("next"==this.direction?this.dataControl.permissions[this.key].next=!1:"prev"==this.direction&&(this.dataControl.permissions[this.key].prev=!1)),this.dataControl.maxOrder[this.key]=t[`${this.key}ResponceLen`],this.step=JSON.parse(t[this.key]).length,this.elements=this._getElements(".result__item",this.container),"next"==this.direction?(this.elements.map(((t,e)=>{e<this.step&&t.remove()})),this.elements=this.elements.filter(((t,e)=>{if(e>=this.step)return t})),this.viewControl.updateHTMLList(this.key),this.viewControl.selecteble(),this.viewControl.selected(),this.dataControl.scrollLock=!1):"prev"==this.direction&&(this.elements.map(((t,e)=>{e>=this.elements.length-this.step&&t.remove()})),this.elements=this.elements.filter(((t,e)=>{if(e<this.elements.length-this.step)return t})),this.viewControl.updateHTMLList(this.key),this.viewControl.selecteble(),this.viewControl.selected(),this.dataControl.scrollLock=!1,this.responceReverse=!1),this.step=15}}document.addEventListener("DOMContentLoaded",(()=>{const t=new DataControl({}),e=new Comparison({dataControl:t,resultContainer:"#result__items",bestContainer:"#best__items",comparisonContainer:"#comparison__items",comparisonLen:["#comparison-lenth","#add-to-cart-lenght"],cartPack:"#cart-pack",cartButton:"#add-to-cart-selected-diamonds",cartLength:"#cart-pack-length",cartExit:"#cart-pack-exit",cartTitle:"#cart-pack-title"});e.init(),function(){const s=new NoUI({parent:".diamonds-filter-container",numericSliders:'[data-slider-type="numeric"]',stringSliders:'[data-slider-type="string"]',shapeInputs:'[data-slider-type="shape"]',labInputs:'[data-slider-type="lab"]',cleanButton:"#reset-filter",dataControl:t,view:e,url:"filtering/"}),i=s.getMaxMin("#range_price"),n=(s.numeric('[data-slider="price"]',{params:{start:[i.min,i.max],connect:!0,step:1,tooltips:!0,range:{min:i.min,max:i.max},format:{to:function(t){return parseInt(t)+"$"},from:function(t){return parseInt(t)}}},options:{key:"sale_price"}}),s.getMaxMin("#range_carat")),a=(s.numeric('[data-slider="carat"]',{params:{start:[n.min,n.max],connect:!0,step:.01,tooltips:!0,range:{min:n.min,max:n.max}},options:{key:"weight"}}),s.getMaxMin("#range_lw")),r=(s.numeric('[data-slider="lw"]',{params:{start:[a.min,a.max],connect:!0,step:.01,tooltips:!0,range:{min:a.min,max:a.max}},options:{key:"lw"}}),s.getMaxMin("#range_table")),l=(s.numeric('[data-slider="table"]',{params:{start:[r.min,r.max],connect:!0,step:.01,tooltips:!0,range:{min:r.min,max:r.max}},options:{key:"table"}}),s.getMaxMin("#range_length")),o=(s.numeric('[data-slider="length"]',{params:{start:[l.min,l.max],connect:!0,step:.01,tooltips:!0,range:{min:l.min,max:l.max}},options:{key:"len"}}),s.getMaxMin("#range_depth")),c=(s.numeric('[data-slider="depth"]',{params:{start:[o.min,o.max],connect:!0,step:.01,tooltips:!0,range:{min:o.min,max:o.max}},options:{key:"depth"}}),s.getMaxMin("#range_depth_procent")),h=(s.numeric('[data-slider="depth_procent"]',{params:{start:[c.min,c.max],connect:!0,step:.01,tooltips:!0,range:{min:c.min,max:c.max}},options:{key:"depth_procent"}}),s.getMaxMin("#range_width"));s.numeric('[data-slider="width"]',{params:{start:[h.min,h.max],connect:!0,step:.01,tooltips:!0,range:{min:h.min,max:h.max}},options:{key:"width"}}),s.string('[data-slider="cut"]',{params:{start:[1,5],connect:!0,step:1,range:{min:1,max:5},pips:{mode:"positions",values:[1,25,50,75,96],density:1,steped:!0},replacePips:["Fair","Good","Very Good","Ideal","Super Ideal"]},options:{key:"cut"}}),s.string('[data-slider="color"]',{params:{start:[1,10],connect:!0,step:1,range:{min:1,max:10},pips:{mode:"count",values:10,density:1},replacePips:["M","L","K","J","I","H","G","F","E","D"]},options:{key:"color"}}),s.string('[data-slider="clarity"]',{params:{start:[1,10],connect:!0,step:1,range:{min:1,max:10},pips:{mode:"count",values:10,density:1},replacePips:["I2","I1","SI2","SI1","VS2","VS1","VVS2","VVS1","IF","FI"]},options:{key:"clarity"}}),s.string('[data-slider="polish"]',{params:{start:[1,3],connect:!0,step:1,range:{min:1,max:3},pips:{mode:"count",values:3,density:1},replacePips:["Good","Very Good","Excellent"]},options:{key:"polish"}}),s.string('[data-slider="symmetry"]',{params:{start:[1,3],connect:!0,step:1,range:{min:1,max:3},pips:{mode:"count",values:3,density:1},replacePips:["Good","Very Good","Excellent"]},options:{key:"symmetry"}}),s.string('[data-slider="fluour"]',{params:{start:[1,5],connect:!0,step:1,range:{min:1,max:5},pips:{mode:"count",values:5,density:1},replacePips:["None","Faint","Medium","Strong","Very Strong"]},options:{key:"fluour"}}),s.select("shape"),s.select("lab")}(),function(){new ElementsControl({manager:"#filter-more-btn",managed:"#filter-2"}).toggler();const t=new ElementsControl({manager:"#filters-container-toggler",managed:"#filters-container"});t.screen((()=>{t.toggler()}));const e=new ElementsControl({manager:"#filter-exit-btn",managed:"#filters-container"});e.screen((()=>{e.toggler()}));const s=new ElementsControl({manager:"#filter-shape",managed:"#shape-jump-container"});s.screen((()=>{s.jump("beforeend")}));const i=new ElementsControl({manager:".filter-info",managed:".filter-item"});i.screen((()=>{i.toggler()}));const n=new ElementsControl({manager:"#filter-advenced-btn",managed:"[data-filter-switch]"});n.screen((()=>{n.switcher()})),new ElementsControl({manager:"#share-link",managed:"#share-link-modal"}).toggler(),new ElementsControl({manager:"#share-modal-close",managed:"#share-link-modal"}).toggler()}(),function(){const s=new InfinityScroll({key:"result",container:"#result__items",dataControl:t,viewControl:e}),i=new InfinityScroll({key:"best",container:"#best__items",dataControl:t,viewControl:e});new ScrollFix({container:"#result__items",extensionBottom:()=>{s.next()},extensionTop:()=>{s.prev()}}),new ScrollFix({container:"#best__items",extensionBottom:()=>{i.next()},extensionTop:()=>{i.prev()}}),new ScrollFix({container:"#comparison__items"})}();new FilterSort({parent:"#pills-result",container:"#result__items",key:"result",control:t,view:e,simpleSort:"#result-simple-sort",modal:"#result-name--modal",priorityList:"#result-name-priority",sortList:"#result-name-sort",url:"filtering/"}).init(),new FilterSort({parent:"#pills-best",container:"#best__items",key:"best",control:t,view:e,simpleSort:"#best-simple-sort",modal:"#best-name--modal",priorityList:"#best-name-priority",sortList:"#best-name-sort",url:"filtering/"}).init(),new FilterSort({parent:"#pills-comparison",container:"#comparison__items",key:"comparison",control:t,view:e,simpleSort:"#comparison-simple-sort",modal:"#comparison-name--modal",priorityList:"#comparison-name-priority",sortList:"#comparison-name-sort",url:"filtering/of/key/"}).init()}));